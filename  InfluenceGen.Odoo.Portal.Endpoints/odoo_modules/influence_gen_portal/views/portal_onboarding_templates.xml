<odoo>
    <data>
        <!-- Onboarding Step Indicator Snippet -->
        <template id="portal_onboarding_steps" name="Onboarding Steps Indicator">
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb">
                    <li t-attf-class="breadcrumb-item #{step == 'register' and 'active'}">
                        <t t-if="step != 'register'"><a href="/influencer/register"><t t-esc="_t('Register')"/></a></t>
                        <t t-else=""><t t-esc="_t('Register')"/></t>
                    </li>
                    <li t-attf-class="breadcrumb-item #{step == 'kyc' and 'active'}" t-att-aria-current="#{step == 'kyc' and 'page'}">
                        <t t-if="step != 'kyc' and kyc_allowed"><a href="/my/kyc/submit"><t t-esc="_t('KYC')"/></a></t>
                        <t t-elif="step != 'kyc' and not kyc_allowed"><span class="text-muted"><t t-esc="_t('KYC')"/></span></t>
                        <t t-else=""><t t-esc="_t('KYC')"/></t>
                    </li>
                    <li t-attf-class="breadcrumb-item #{step == 'social' and 'active'}" t-att-aria-current="#{step == 'social' and 'page'}">
                         <t t-if="step != 'social' and social_allowed"><a href="/my/social/setup"><t t-esc="_t('Social Media')"/></a></t>
                         <t t-elif="step != 'social' and not social_allowed"><span class="text-muted"><t t-esc="_t('Social Media')"/></span></t>
                        <t t-else=""><t t-esc="_t('Social Media')"/></t>
                    </li>
                    <li t-attf-class="breadcrumb-item #{step == 'bank' and 'active'}" t-att-aria-current="#{step == 'bank' and 'page'}">
                        <t t-if="step != 'bank' and bank_allowed"><a href="/my/bank/setup"><t t-esc="_t('Bank Details')"/></a></t>
                        <t t-elif="step != 'bank' and not bank_allowed"><span class="text-muted"><t t-esc="_t('Bank Details')"/></span></t>
                        <t t-else=""><t t-esc="_t('Bank Details')"/></t>
                    </li>
                    <li t-attf-class="breadcrumb-item #{step == 'tos' and 'active'}" t-att-aria-current="#{step == 'tos' and 'page'}">
                        <t t-if="step != 'tos' and tos_allowed"><a href="/my/tos/agree"><t t-esc="_t('Terms of Service')"/></a></t>
                        <t t-elif="step != 'tos' and not tos_allowed"><span class="text-muted"><t t-esc="_t('Terms of Service')"/></span></t>
                        <t t-else=""><t t-esc="_t('Terms of Service')"/></t>
                    </li>
                </ol>
            </nav>
        </template>

        <!-- Registration Form Template -->
        <template id="portal_registration_form" name="Influencer Registration Form">
            <t t-call="website.layout">
                <div id="wrap" class="oe_structure oe_empty">
                    <section class="py-5">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-md-6">
                                    <t t-call="influence_gen_portal.portal_onboarding_steps"><t t-set="step" t-value="'register'"/></t>
                                    <div class="card shadow">
                                        <div class="card-header bg-primary text-white">
                                            <h3 class="mb-0"><t t-esc="_t('Influencer Registration')"/></h3>
                                        </div>
                                        <div class="card-body">
                                            <form action="/influencer/register/process" method="post">
                                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                                <div t-if="error" class="alert alert-danger" role="alert">
                                                    <t t-esc="error"/>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="fullName" class="form-label"><t t-esc="_t('Full Name')"/></label>
                                                    <input type="text" name="fullName" t-att-value="fullName or ''" id="fullName" class="form-control" required="required" autofocus="autofocus"/>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="email" class="form-label"><t t-esc="_t('Email')"/></label>
                                                    <input type="email" name="email" t-att-value="email or ''" id="email" class="form-control" required="required"/>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="password" class="form-label"><t t-esc="_t('Password')"/></label>
                                                    <input type="password" name="password" id="password" class="form-control" required="required"/>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="confirm_password" class="form-label"><t t-esc="_t('Confirm Password')"/></label>
                                                    <input type="password" name="confirm_password" id="confirm_password" class="form-control" required="required"/>
                                                </div>
                                                <div class="d-grid">
                                                    <button type="submit" class="btn btn-primary btn-block"><i class="fa fa-user-plus me-1"/> <t t-esc="_t('Register')"/></button>
                                                </div>
                                            </form>
                                            <hr/>
                                            <div class="text-center">
                                                <t t-esc="_t('Already have an account?')"/> <a t-attf-href="/web/login?redirect=#{redirect or '/my/dashboard'}"><t t-esc="_t('Sign In')"/></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </t>
        </template>

        <!-- KYC Submission Form Template -->
        <template id="portal_kyc_submission_form" name="Influencer KYC Submission Form">
            <t t-call="portal.portal_layout">
                <t t-set="breadcrumbs" t-value="[
                    {'url': '/my/dashboard', 'text': _t('Dashboard')},
                    {'url': '/my/kyc/submit', 'text': _t('KYC Submission')}
                ]"/>
                 <t t-call="portal.portal_search_panel">
                     <t t-set="title">
                        <h1 class="mb-0"><t t-esc="_t('KYC Document Submission')"/></h1>
                    </t>
                </t>
                <div class="container mt-4">
                    <t t-call="influence_gen_portal.portal_onboarding_steps"><t t-set="step" t-value="'kyc'"/></t>
                    <div t-if="error_message" class="alert alert-danger" role="alert">
                        <t t-esc="error_message"/>
                    </div>
                     <div t-if="success_message" class="alert alert-success" role="alert">
                        <t t-esc="success_message"/>
                    </div>

                    <t t-if="kyc_data and kyc_data.kycStatus == 'approved'">
                         <div class="alert alert-success" role="alert">
                            <h4 class="alert-heading"><i class="fa fa-check-circle me-1"/> <t t-esc="_t('KYC Already Approved!')"/></h4>
                            <p><t t-esc="_t('Your KYC information is already verified and approved.')"/></p>
                            <hr/>
                            <a href="/my/dashboard" class="btn btn-primary"><t t-esc="_t('Go to Dashboard')"/></a>
                        </div>
                    </t>
                    <t t-elif="kyc_data and kyc_data.kycStatus == 'pending'">
                        <div class="alert alert-info" role="alert">
                            <h4 class="alert-heading"><i class="fa fa-clock-o me-1"/> <t t-esc="_t('KYC Pending Review')"/></h4>
                            <p><t t-esc="_t('Your documents are currently under review. We will notify you once the process is complete.')"/></p>
                        </div>
                    </t>
                    <t t-else="">
                        <form action="/my/kyc/submit/process" method="post" enctype="multipart/form-data">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                             <div class="alert alert-info" role="alert">
                                <strong><t t-esc="_t('Instructions:')"/></strong>
                                <ul>
                                    <li><t t-esc="_t('Please upload clear, legible copies of your identification document.')"/></li>
                                    <li><t t-esc="_t('Accepted document types: Passport, National ID Card, Driver\'s License.')"/></li>
                                    <li><t t-esc="_t('Ensure all four corners of the document are visible.')"/></li>
                                    <li><t t-esc="_t('Max file size: 5MB. Accepted formats: JPG, PNG, PDF.')"/></li>
                                </ul>
                            </div>

                            <div class="mb-3">
                                <label for="documentType" class="form-label"><t t-esc="_t('Document Type')"/></label>
                                <select class="form-select" id="documentType" name="documentType" required="required">
                                    <option value="" selected="selected" disabled="disabled"><t t-esc="_t('Select Document Type...')"/></option>
                                    <option value="passport"><t t-esc="_t('Passport')"/></option>
                                    <option value="national_id"><t t-esc="_t('National ID Card')"/></option>
                                    <option value="driver_license"><t t-esc="_t('Driver\'s License')"/></option>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label for="documentFront" class="form-label"><t t-esc="_t('Document Front')"/></label>
                                <div id="file_uploader_front_container">
                                     <t t-call="influence_gen_portal.FileUploaderComponent">
                                        <t t-set="props" t-value="{
                                            'acceptedFileTypes': 'image/jpeg,image/png,application/pdf',
                                            'maxFileSize': 5 * 1024 * 1024,
                                            'uploadUrl': '/my/kyc/upload_document_chunk',
                                            'fieldName': 'document_front_file',
                                            'label': _t('Upload Front of Document')
                                        }"/>
                                    </t>
                                </div>
                                <input type="file" name="document_front_file_fallback" class="form-control d-none" accept="image/jpeg,image/png,application/pdf"/>
                                <small class="form-text text-muted"><t t-esc="_t('If the uploader above does not work, use this standard file input.')"/></small>
                            </div>

                            <div class="mb-3">
                                <label for="documentBack" class="form-label"><t t-esc="_t('Document Back (if applicable)')"/></label>
                                <div id="file_uploader_back_container">
                                     <t t-call="influence_gen_portal.FileUploaderComponent">
                                         <t t-set="props" t-value="{
                                            'acceptedFileTypes': 'image/jpeg,image/png,application/pdf',
                                            'maxFileSize': 5 * 1024 * 1024,
                                            'uploadUrl': '/my/kyc/upload_document_chunk',
                                            'fieldName': 'document_back_file',
                                            'label': _t('Upload Back of Document')
                                        }"/>
                                    </t>
                                </div>
                                 <input type="file" name="document_back_file_fallback" class="form-control d-none" accept="image/jpeg,image/png,application/pdf"/>
                                 <small class="form-text text-muted"><t t-esc="_t('For documents like ID cards or driver\'s licenses that have information on both sides.')"/></small>
                            </div>
                            <input type="hidden" name="document_front_attachment_id" id="document_front_attachment_id"/>
                            <input type="hidden" name="document_back_attachment_id" id="document_back_attachment_id"/>

                            <button type="submit" class="btn btn-primary"><i class="fa fa-upload me-1"/> <t t-esc="_t('Submit KYC Documents')"/></button>
                        </form>
                    </t>
                     <hr/>
                    <a href="/my/kyc/status" class="btn btn-link"><t t-esc="_t('Check my KYC Status')"/></a>
                </div>
                 <!-- Mount point for OWL component if needed, and JS to initialize -->
                <script type="text/javascript">
                    odoo.loader. όταν hazırsa(function () {
                        if (odoo.debug &amp;&amp; odoo.debug.assets) { // Ensures assets are loaded in debug mode
                            // Placeholder: Logic to mount FileUploaderComponent instances if not done by t-call
                            // Example:
                            // const { mount } = owl;
                            // const { FileUploaderComponent } = odoo.influence_gen_portal.components;
                            // if (document.getElementById('file_uploader_front_container') &amp;&amp; FileUploaderComponent) {
                            //    mount(FileUploaderComponent, document.getElementById('file_uploader_front_container'), { 
                            //        props: { /* props as defined in t-call */ }
                            //    });
                            // }
                            // Similar for back uploader
                        }
                    });
                </script>
            </t>
        </template>

        <!-- Social Media Setup Form Template -->
        <template id="portal_social_media_form" name="Influencer Social Media Setup">
            <t t-call="portal.portal_layout">
                <t t-set="breadcrumbs" t-value="[
                    {'url': '/my/dashboard', 'text': _t('Dashboard')},
                    {'url': '/my/social/setup', 'text': _t('Social Media Setup')}
                ]"/>
                 <t t-call="portal.portal_search_panel">
                     <t t-set="title">
                        <h1 class="mb-0"><t t-esc="_t('Social Media Setup')"/></h1>
                    </t>
                </t>
                <div class="container mt-4">
                    <t t-call="influence_gen_portal.portal_onboarding_steps"><t t-set="step" t-value="'social'"/></t>
                     <div t-if="error_message" class="alert alert-danger" role="alert">
                        <t t-esc="error_message"/>
                    </div>
                     <div t-if="success_message" class="alert alert-success" role="alert">
                        <t t-esc="success_message"/>
                    </div>
                    <t t-call="influence_gen_portal.portal_social_media_form_snippet">
                        <t t-set="form_action" t-value="'/my/social/setup/process?redirect=/my/bank/setup'"/>
                    </t>
                    <div class="mt-3 d-flex justify-content-between">
                        <a href="/my/kyc/submit" class="btn btn-secondary"><i class="fa fa-arrow-left me-1"/> <t t-esc="_t('Back to KYC')"/></a>
                        <a href="/my/bank/setup" class="btn btn-primary"><t t-esc="_t('Next: Bank Details')"/> <i class="fa fa-arrow-right ms-1"/></a>
                    </div>
                </div>
            </t>
        </template>

        <!-- Bank Account Setup Form Template -->
        <template id="portal_bank_account_form" name="Influencer Bank Account Setup">
            <t t-call="portal.portal_layout">
                <t t-set="breadcrumbs" t-value="[
                    {'url': '/my/dashboard', 'text': _t('Dashboard')},
                    {'url': '/my/bank/setup', 'text': _t('Bank Account Setup')}
                ]"/>
                 <t t-call="portal.portal_search_panel">
                     <t t-set="title">
                        <h1 class="mb-0"><t t-esc="_t('Bank Account Setup')"/></h1>
                    </t>
                </t>
                <div class="container mt-4">
                     <t t-call="influence_gen_portal.portal_onboarding_steps"><t t-set="step" t-value="'bank'"/></t>
                     <div t-if="error_message" class="alert alert-danger" role="alert">
                        <t t-esc="error_message"/>
                    </div>
                     <div t-if="success_message" class="alert alert-success" role="alert">
                        <t t-esc="success_message"/>
                    </div>
                    <form action="/my/bank/setup/process?redirect=/my/tos/agree" method="post">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <t t-call="influence_gen_portal.portal_payment_info_template_content_form_fields_only"/>
                        <button type="submit" class="btn btn-primary"><i class="fa fa-save me-1"/> <t t-esc="_t('Save Bank Account')"/></button>
                    </form>
                     <div class="mt-3 d-flex justify-content-between">
                        <a href="/my/social/setup" class="btn btn-secondary"><i class="fa fa-arrow-left me-1"/> <t t-esc="_t('Back to Social Media')"/></a>
                        <a href="/my/tos/agree" class="btn btn-primary"><t t-esc="_t('Next: Terms of Service')"/> <i class="fa fa-arrow-right ms-1"/></a>
                    </div>
                </div>
            </t>
        </template>
        
        <!-- Snippet for bank account fields (used in onboarding and profile) -->
        <template id="portal_payment_info_template_content_form_fields_only" name="Bank Account Form Fields">
            <div class="alert alert-info" role="alert">
                <t t-esc="_t('Please provide your bank account details accurately. This information will be used for campaign payouts. All sensitive data is stored encrypted.')"/>
            </div>
            <div class="row">
                <div class="mb-3 col-md-6">
                    <label for="onboarding_accountHolderName" class="form-label"><t t-esc="_t('Account Holder Name')"/></label>
                    <input type="text" class="form-control" id="onboarding_accountHolderName" name="accountHolderName" t-att-value="bank_account.accountHolderName" required="required"/>
                </div>
                <div class="mb-3 col-md-6">
                    <label for="onboarding_bankName" class="form-label"><t t-esc="_t('Bank Name')"/></label>
                    <input type="text" class="form-control" id="onboarding_bankName" name="bankName" t-att-value="bank_account.bankName" required="required"/>
                </div>
            </div>
            <div class="row">
                <div class="mb-3 col-md-6">
                    <label for="onboarding_accountNumber" class="form-label"><t t-esc="_t('Account Number')"/></label>
                    <input type="text" class="form-control" id="onboarding_accountNumber" name="accountNumber" t-att-value="bank_account.accountNumber" required="required"/>
                </div>
                <div class="mb-3 col-md-6">
                    <label for="onboarding_routingNumber" class="form-label"><t t-esc="_t('Routing Number / Sort Code (if applicable)')"/></label>
                    <input type="text" class="form-control" id="onboarding_routingNumber" name="routingNumber" t-att-value="bank_account.routingNumber"/>
                </div>
            </div>
            <div class="row">
                <div class="mb-3 col-md-6">
                    <label for="onboarding_iban" class="form-label"><t t-esc="_t('IBAN (if applicable)')"/></label>
                    <input type="text" class="form-control" id="onboarding_iban" name="iban" t-att-value="bank_account.iban"/>
                </div>
                <div class="mb-3 col-md-6">
                    <label for="onboarding_swiftCode" class="form-label"><t t-esc="_t('SWIFT/BIC Code (if applicable)')"/></label>
                    <input type="text" class="form-control" id="onboarding_swiftCode" name="swiftCode" t-att-value="bank_account.swiftCode"/>
                </div>
            </div>
             <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="onboarding_isPrimary" name="isPrimary" value="true" t-att-checked="bank_account.isPrimary or True"/> <!-- Default to true for first setup -->
                <label class="form-check-label" for="onboarding_isPrimary"><t t-esc="_t('Set as primary account for payouts')"/></label>
            </div>
             <div class="form-text mt-2 mb-3"><t t-esc="_t('Bank account verification might involve micro-deposits or other checks as per system configuration.')"/></div>
        </template>

        <!-- ToS Agreement Form Template -->
        <template id="portal_tos_agreement_form" name="Influencer ToS Agreement">
            <t t-call="portal.portal_layout">
                <t t-set="breadcrumbs" t-value="[
                    {'url': '/my/dashboard', 'text': _t('Dashboard')},
                    {'url': '/my/tos/agree', 'text': _t('Terms of Service')}
                ]"/>
                 <t t-call="portal.portal_search_panel">
                     <t t-set="title">
                        <h1 class="mb-0"><t t-esc="_t('Terms of Service &amp; Privacy Policy Agreement')"/></h1>
                    </t>
                </t>
                <div class="container mt-4">
                     <t t-call="influence_gen_portal.portal_onboarding_steps"><t t-set="step" t-value="'tos'"/></t>
                     <div t-if="error_message" class="alert alert-danger" role="alert">
                        <t t-esc="error_message"/>
                    </div>
                     <div t-if="success_message" class="alert alert-success" role="alert">
                        <t t-esc="success_message"/>
                    </div>

                    <form action="/my/tos/agree/process?redirect=/my/dashboard" method="post">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <input type="hidden" name="tos_version" t-att-value="current_tos.version"/>
                        <input type="hidden" name="privacy_policy_version" t-att-value="current_privacy_policy.version"/>

                        <div class="card mb-3">
                            <div class="card-body">
                                <h5 class="card-title"><t t-esc="_t('Terms of Service (Version %s)', current_tos.version)"/></h5>
                                <p class="card-text"><t t-esc="_t('Please review our latest Terms of Service.')"/></p>
                                <a t-att-href="current_tos.url or '/terms'" target="_blank" rel="noopener noreferrer" class="btn btn-outline-primary"><i class="fa fa-external-link me-1"/> <t t-esc="_t('View Terms of Service')"/></a>
                            </div>
                        </div>

                        <div class="card mb-3">
                             <div class="card-body">
                                <h5 class="card-title"><t t-esc="_t('Privacy Policy (Version %s)', current_privacy_policy.version)"/></h5>
                                <p class="card-text"><t t-esc="_t('Please review our latest Privacy Policy.')"/></p>
                                <a t-att-href="current_privacy_policy.url or '/privacy'" target="_blank" rel="noopener noreferrer" class="btn btn-outline-primary"><i class="fa fa-external-link me-1"/> <t t-esc="_t('View Privacy Policy')"/></a>
                            </div>
                        </div>

                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" value="true" id="accept_terms_onboarding" name="accepted_terms" required="required"/>
                            <label class="form-check-label" for="accept_terms_onboarding">
                                <t t-esc="_t('I have read, understood, and agree to the InfluenceGen Terms of Service and Privacy Policy.')"/>
                            </label>
                        </div>
                        <button type="submit" class="btn btn-success btn-lg"><i class="fa fa-check-square-o me-1"/> <t t-esc="_t('Agree and Complete Onboarding')"/></button>
                    </form>
                     <div class="mt-3 d-flex justify-content-start">
                        <a href="/my/bank/setup" class="btn btn-secondary"><i class="fa fa-arrow-left me-1"/> <t t-esc="_t('Back to Bank Details')"/></a>
                    </div>
                </div>
            </t>
        </template>
        
        <!-- KYC Status Page Template -->
        <template id="portal_kyc_status_page" name="KYC Status Page">
            <t t-call="portal.portal_layout">
                 <t t-set="breadcrumbs" t-value="[
                    {'url': '/my/dashboard', 'text': _t('Dashboard')},
                    {'url': '/my/kyc/status', 'text': _t('KYC Status')}
                ]"/>
                 <t t-call="portal.portal_search_panel">
                     <t t-set="title">
                        <h1 class="mb-0"><t t-esc="_t('Your KYC Status')"/></h1>
                    </t>
                </t>
                 <div class="container mt-4">
                     <div t-if="error_message" class="alert alert-danger" role="alert">
                        <t t-esc="error_message"/>
                    </div>
                     <div t-if="success_message" class="alert alert-success" role="alert">
                        <t t-esc="success_message"/>
                    </div>
                    <t t-call="influence_gen_portal.portal_kyc_status_display_snippet"/>
                    <div class="mt-3">
                         <a href="/my/dashboard" class="btn btn-secondary"><i class="fa fa-arrow-left me-1"/> <t t-esc="_t('Back to Dashboard')"/></a>
                    </div>
                </div>
            </t>
        </template>

    </data>
</odoo>